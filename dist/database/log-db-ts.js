'use strict';Object.defineProperty(exports,'__esModule',{value:true});const db_kernel_1=require('../lib/dbcore/db-kernel');class LoggingDb{constructor(){this.tableName='log';this.db=new db_kernel_1.DBKernel();}clearLog(){let sql=`DELETE FROM ${this.tableName}`;return this.db.runQuery(sql);}doLog(section,prefix,value,code=0){let valStr='';if(typeof value==='object'){valStr=JSON.stringify(value);}else{valStr=value;}return new Promise((resolve,reject)=>{let sql=`INSERT INTO ${this.tableName} (id, section, prefix, value, code) VALUES (NULL, '${section}', '${prefix}', '${valStr}', '${code}');`;return new Promise((resolve,reject)=>{this.db.dbQuery(sql).then(res=>{resolve(true);}).catch(err=>{resolve(false);});});});}}exports.LoggingDb=LoggingDb;